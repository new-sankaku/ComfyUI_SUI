<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ComfyUI Sui</title>
<link rel="stylesheet" href="css/comfyui-variables.min.css">
<link rel="stylesheet" href="css/comfyui-layout.min.css">
<link rel="stylesheet" href="css/comfyui-components.min.css">
<link rel="stylesheet" href="css/comfyui-modal.min.css">
<link rel="stylesheet" href="css/comfyui-workflow-editor.min.css">
<link rel="stylesheet" href="css/comfyui-wildcard.min.css">
<link rel="stylesheet" href="css/language-selector.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.0.0/css/flag-icons.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/tagify/4.31.3/tagify.min.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.min.js"></script>
<link rel="stylesheet" href="css/toast.css">
<link rel="stylesheet" href="css/error-guide-dialog.css">
<link rel="stylesheet" href="css/prompt-history.css">
<link rel="stylesheet" href="css/dashboard.css">
<link rel="stylesheet" href="css/theme.css">
<link rel="stylesheet" href="css/settings.css">
</head>
<body>
<div class="root-container">
<div class="sidebar" id="leftSidebar">
<div class="sidebar-header">
<div class="sidebar-title" data-i18n="menu.title">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</div>
<button class="sidebar-toggle" id="sidebarToggle" data-i18n="sidebar.collapse" data-i18n-attr="title">Â«</button>
</div>
<div class="menu-section">
<div class="menu-section-title" data-i18n="menu.generationMode">ç”Ÿæˆãƒ¢ãƒ¼ãƒ‰</div>
<button class="menu-button active" data-mode="normal" id="btnModeNormal"><span class="menu-icon">T</span><span class="menu-label" data-i18n="modes.t2i">T2Iç”Ÿæˆ</span></button>
<button class="menu-button" data-mode="loop" id="btnModeLoop"><span class="menu-icon">â†»</span><span class="menu-label" data-i18n="modes.t2iLoop">T2Iãƒ«ãƒ¼ãƒ—ç”Ÿæˆ</span></button>
<button class="menu-button" data-mode="i2i" id="btnModeI2I"><span class="menu-icon">I</span><span class="menu-label" data-i18n="modes.i2i">I2Iç”Ÿæˆ</span></button>
<button class="menu-button" data-mode="i2iloop" id="btnModeI2ILoop"><span class="menu-icon">âŸ³</span><span class="menu-label" data-i18n="modes.i2iLoop">I2Iãƒ«ãƒ¼ãƒ—ç”Ÿæˆ</span></button>
<button class="menu-button" data-mode="i2iangle" id="btnModeI2IAngle"><span class="menu-icon">âˆ </span><span class="menu-label" data-i18n="modes.i2iAngle">I2Iã‚¢ãƒ³ã‚°ãƒ«ç”Ÿæˆ</span></button>
<button class="menu-button" data-mode="upscaleloop" id="btnModeUpscaleLoop"><span class="menu-icon">â¤¢</span><span class="menu-label" data-i18n="modes.upscaleLoop">Upscaleãƒ«ãƒ¼ãƒ—</span></button>
</div>
<div class="sidebar-settings">
<div class="sidebar-lang-selector">
<div class="language-dropdown" id="sidebarLangDropdown">
<button type="button" class="language-dropdown-btn" id="sidebarLangBtn">
<span class="fi fi-jp"></span>
<span class="language-text">æ—¥æœ¬èª</span>
<span class="dropdown-arrow"></span>
</button>
<div class="language-dropdown-menu">
<div class="language-option" data-lang="ja">
<span class="fi fi-jp"></span>
<span>æ—¥æœ¬èª</span>
</div>
<div class="language-option" data-lang="en">
<span class="fi fi-us"></span>
<span>English</span>
</div>
<div class="language-option" data-lang="zh">
<span class="fi fi-cn"></span>
<span>ä¸­æ–‡</span>
</div>
</div>
</div>
</div>
<button class="settings-button" id="btnOpenSettings" title="Settings">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<circle cx="12" cy="12" r="3"></circle>
<path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
</svg>
<span data-i18n="settings.title">è¨­å®š</span>
</button>
</div>
</div>
<div class="mode-config-panel" id="modeConfigPanel">
<div class="mode-config-title" id="modeConfigTitle" data-i18n="config.normalGeneration">é€šå¸¸ç”Ÿæˆ</div>
<div id="normalModeConfig" class="mode-config-content active">
<div class="form-section" style="margin-top:0;">
<div class="form-group">
<label data-i18n="config.workflowT2I">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (T2I)</label>
<div class="workflow-display" id="normalWorkflowDisplay" data-i18n="config.notSelected">æœªé¸æŠ</div>
</div>
<div class="form-group">
<label data-i18n="config.generateCount">ç”Ÿæˆæšæ•°</label>
<input type="number" id="normalGenerateCount" value="1" min="1" max="10">
</div>
</div>
<button class="generate-button" id="btnGenerateNormal" data-i18n="config.generate">ç”Ÿæˆ</button>
<button class="generate-button cancel-button" id="btnCancelNormal" style="margin-top:8px;display:none;" data-i18n="config.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
</div>
<div id="loopModeConfig" class="mode-config-content">
<div class="form-group" style="flex-shrink:0;">
<label data-i18n="config.workflowT2I">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (T2I)</label>
<div class="workflow-display" id="loopWorkflowDisplay" data-i18n="config.notSelected">æœªé¸æŠ</div>
</div>
<div class="form-group" style="flex-shrink:0;">
<label data-i18n="config.promptPosition">è¿½åŠ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½ç½®</label>
<div class="radio-group">
<label class="radio-label"><input type="radio" name="loopPromptPosition" value="start" checked><span data-i18n="config.positionStart">Startï¼ˆå…ˆé ­ã«è¿½åŠ ï¼‰</span></label>
<label class="radio-label"><input type="radio" name="loopPromptPosition" value="end"><span data-i18n="config.positionEnd">Endï¼ˆæœ«å°¾ã«è¿½åŠ ï¼‰</span></label>
</div>
</div>
<div class="form-group loop-textarea-group">
<div class="loop-textarea-label"><span data-i18n="config.positivePromptList">ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒªã‚¹ãƒˆ</span><span class="loop-line-count" id="loopPositiveLineCount">0 è¡Œ</span></div>
<textarea id="loopPositivePrompts" data-i18n-placeholder="config.promptPerLine" placeholder="å„è¡Œã«1ã¤ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›"></textarea>
</div>
<div class="form-group loop-textarea-group">
<div class="loop-textarea-label"><span data-i18n="config.negativePromptList">ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒªã‚¹ãƒˆ</span><span class="loop-line-count" id="loopNegativeLineCount">0 è¡Œ</span></div>
<textarea id="loopNegativePrompts" data-i18n-placeholder="config.promptPerLine" placeholder="å„è¡Œã«1ã¤ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›"></textarea>
</div>
<button class="generate-button" id="btnGenerateLoop" style="flex-shrink:0;" data-i18n="config.loopGenerate">ãƒ«ãƒ¼ãƒ—ç”Ÿæˆ</button>
<button class="generate-button cancel-button" id="btnCancelLoop" style="margin-top:8px;flex-shrink:0;display:none;" data-i18n="config.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
</div>
<div id="i2iModeConfig" class="mode-config-content">
<div class="form-section" style="margin-top:0;">
<div class="form-group">
<label data-i18n="config.workflowI2I">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (I2I)</label>
<div class="workflow-display" id="i2iWorkflowDisplay" data-i18n="config.notSelected">æœªé¸æŠ</div>
</div>
<div class="form-group">
<label><span data-i18n="config.inputImage">å…¥åŠ›ç”»åƒ</span> <span class="i2i-image-count" id="i2iImageCount"></span></label>
<div class="i2i-image-upload-area" id="i2iImageUploadArea">
<input type="file" id="i2iImageInput" accept="image/*" multiple style="display:none;">
<div class="i2i-image-preview-grid" id="i2iImagePreview">
<div class="i2i-image-placeholder" data-i18n="config.dropImage">ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ç”»åƒã‚’é¸æŠï¼ˆè¤‡æ•°å¯ï¼‰</div>
</div>
</div>
</div>
<div class="form-group">
<label data-i18n="config.generateCountPerImage">å„ç”»åƒã®ç”Ÿæˆæšæ•°</label>
<input type="number" id="i2iGenerateCount" value="1" min="1" max="10">
</div>
</div>
<button class="generate-button" id="btnGenerateI2I" data-i18n="config.generate">ç”Ÿæˆ</button>
<button class="generate-button cancel-button" id="btnCancelI2I" style="margin-top:8px;display:none;" data-i18n="config.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
</div>
<div id="i2iloopModeConfig" class="mode-config-content">
<div class="form-group" style="flex-shrink:0;">
<label data-i18n="config.workflowI2I">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (I2I)</label>
<div class="workflow-display" id="i2iloopWorkflowDisplay" data-i18n="config.notSelected">æœªé¸æŠ</div>
</div>
<div class="form-group" style="flex-shrink:0;">
<label><span data-i18n="config.inputImage">å…¥åŠ›ç”»åƒ</span> <span class="i2i-image-count" id="i2iloopImageCount"></span></label>
<div class="i2i-image-upload-area" id="i2iloopImageUploadArea">
<input type="file" id="i2iloopImageInput" accept="image/*" multiple style="display:none;">
<div class="i2i-image-preview-grid" id="i2iloopImagePreview">
<div class="i2i-image-placeholder" data-i18n="config.dropImage">ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ç”»åƒã‚’é¸æŠï¼ˆè¤‡æ•°å¯ï¼‰</div>
</div>
</div>
</div>
<div class="form-group" style="flex-shrink:0;">
<label data-i18n="config.promptPosition">è¿½åŠ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½ç½®</label>
<div class="radio-group">
<label class="radio-label"><input type="radio" name="i2iloopPromptPosition" value="start" checked><span data-i18n="config.positionStart">Startï¼ˆå…ˆé ­ã«è¿½åŠ ï¼‰</span></label>
<label class="radio-label"><input type="radio" name="i2iloopPromptPosition" value="end"><span data-i18n="config.positionEnd">Endï¼ˆæœ«å°¾ã«è¿½åŠ ï¼‰</span></label>
</div>
</div>
<div class="form-group loop-textarea-group">
<div class="loop-textarea-label"><span data-i18n="config.positivePromptList">ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒªã‚¹ãƒˆ</span><span class="loop-line-count" id="i2iloopPositiveLineCount">0 è¡Œ</span></div>
<textarea id="i2iloopPositivePrompts" data-i18n-placeholder="config.promptPerLine" placeholder="å„è¡Œã«1ã¤ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›"></textarea>
</div>
<div class="form-group loop-textarea-group">
<div class="loop-textarea-label"><span data-i18n="config.negativePromptList">ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒªã‚¹ãƒˆ</span><span class="loop-line-count" id="i2iloopNegativeLineCount">0 è¡Œ</span></div>
<textarea id="i2iloopNegativePrompts" data-i18n-placeholder="config.promptPerLine" placeholder="å„è¡Œã«1ã¤ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›"></textarea>
</div>
<button class="generate-button" id="btnGenerateI2ILoop" style="flex-shrink:0;" data-i18n="config.loopGenerate">ãƒ«ãƒ¼ãƒ—ç”Ÿæˆ</button>
<button class="generate-button cancel-button" id="btnCancelI2ILoop" style="margin-top:8px;flex-shrink:0;display:none;" data-i18n="config.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
</div>
<div id="i2iangleModeConfig" class="mode-config-content">
<div class="form-group" style="flex-shrink:0;">
<label data-i18n="config.workflowI2I">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (I2I)</label>
<div class="workflow-display" id="i2iangleWorkflowDisplay" data-i18n="config.notSelected">æœªé¸æŠ</div>
</div>
<div class="form-group" style="flex-shrink:0;">
<label><span data-i18n="config.inputImage">å…¥åŠ›ç”»åƒ</span> <span class="i2i-image-count" id="i2iangleImageCount"></span></label>
<div class="i2i-image-upload-area" id="i2iangleImageUploadArea">
<input type="file" id="i2iangleImageInput" accept="image/*" multiple style="display:none;">
<div class="i2i-image-preview-grid" id="i2iangleImagePreview">
<div class="i2i-image-placeholder" data-i18n="config.dropImage">ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ç”»åƒã‚’é¸æŠï¼ˆè¤‡æ•°å¯ï¼‰</div>
</div>
</div>
</div>
<div class="form-group loop-textarea-group">
<div class="loop-textarea-label"><span data-i18n="config.anglePrompt">ã‚¢ãƒ³ã‚°ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</span><span class="loop-line-count" id="i2ianglePromptLineCount">0 è¡Œ</span></div>
<textarea id="i2ianglePrompts" data-i18n-placeholder="config.anglePromptPerLine" placeholder="å„è¡Œã«1ã¤ã®ã‚¢ãƒ³ã‚°ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›&#10;ä¾‹: front view&#10;side view&#10;back view"></textarea>
</div>
<div class="form-group" style="margin-bottom:8px;">
<button class="angle-add-button-small" id="btnAddAnglePrompt" data-i18n="config.sendToAngle">Angleâ†‘é€ä¿¡</button>
<div class="qwen-multiangle-prompt-external" id="cameraWidgetPrompt">&lt;sks&gt; front view eye-level shot medium shot</div>
<div class="qwen-multiangle-wrapper">
<div class="qwen-multiangle-container">
<div class="qwen-multiangle-canvas" id="cameraWidgetCanvas"></div>
<button class="qwen-multiangle-reset-corner" id="cameraWidgetReset" title="Reset to defaults">â†º</button>
</div>
</div>
</div>
<button class="generate-button" id="btnGenerateI2IAngle" style="flex-shrink:0;" data-i18n="config.angleGenerate">ã‚¢ãƒ³ã‚°ãƒ«ç”Ÿæˆ</button>
<button class="generate-button cancel-button" id="btnCancelI2IAngle" style="margin-top:8px;flex-shrink:0;display:none;" data-i18n="config.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
</div>
<div id="upscaleloopModeConfig" class="mode-config-content">
<div class="form-group" style="flex-shrink:0;">
<label data-i18n="config.workflowUpscale">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (Upscale)</label>
<div class="workflow-display" id="upscaleloopWorkflowDisplay" data-i18n="config.notSelected">æœªé¸æŠ</div>
</div>
<div class="form-group" style="flex-shrink:0;">
<label><span data-i18n="config.inputImage">å…¥åŠ›ç”»åƒ</span> <span class="i2i-image-count" id="upscaleloopImageCount"></span></label>
<div class="i2i-image-upload-area" id="upscaleloopImageUploadArea">
<input type="file" id="upscaleloopImageInput" accept="image/*" multiple style="display:none;">
<div class="i2i-image-preview-grid" id="upscaleloopImagePreview">
<div class="i2i-image-placeholder" data-i18n="config.dropImage">ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ç”»åƒã‚’é¸æŠï¼ˆè¤‡æ•°å¯ï¼‰</div>
</div>
</div>
</div>
<button class="generate-button" id="btnGenerateUpscaleLoop" style="flex-shrink:0;" data-i18n="config.upscaleGenerate">ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«ç”Ÿæˆ</button>
<button class="generate-button cancel-button" id="btnCancelUpscaleLoop" style="margin-top:8px;flex-shrink:0;display:none;" data-i18n="config.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
</div>
</div>
<div class="center-container">
<div class="center-tabs">
<button class="center-tab active" data-tab="basic" id="btnTabBasic" data-i18n="tabs.basic">åŸºæœ¬è¨­å®š</button>
<button class="center-tab" data-tab="advanced" id="btnTabAdvanced" data-i18n="tabs.advanced">è©³ç´°è¨­å®š</button>
<button class="center-tab" data-tab="wildcard" id="btnTabWildcard" data-i18n="tabs.wildcard">WildCardè¨­å®š</button>
<button class="center-tab" data-tab="dashboard" id="btnTabDashboard" data-i18n="tabs.dashboard">Dashboard</button>
</div>
<div id="tabBasicContent" class="tab-content active">
<div class="form-section">
<div class="form-group">
<label><span data-i18n="basic.prompt">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</span> <span style="font-size:11px;color:#888;" data-i18n="basic.promptHint">ï¼ˆ__name__ã§ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰æŒ¿å…¥ï¼‰</span></label>
<textarea id="prompt" style="min-height:150px;" data-i18n-placeholder="basic.promptPlaceholder" placeholder="ç”Ÿæˆã—ãŸã„å†…å®¹ã‚’è¨˜å…¥&#10;ä¾‹: __quality__, 1girl, __hair_color__, __expression__">1girl, beautiful face, smile, looking at viewer</textarea>
</div>
<div class="form-group">
<label data-i18n="basic.negativePrompt">ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</label>
<textarea id="negative_prompt" style="min-height:120px;" data-i18n-placeholder="basic.negativePlaceholder" placeholder="é™¤å¤–ã—ãŸã„å†…å®¹ã‚’è¨˜å…¥">bad quality, blurry, low resolution</textarea>
</div>
</div>
<div class="form-section">
<div class="form-section-title" data-i18n="basic.imageSettings">ç”»åƒè¨­å®š</div>
<div class="form-row-three">
<div class="form-group">
<label data-i18n="basic.width">å¹…</label>
<input type="number" id="width" value="1024" min="512" step="8">
</div>
<div class="form-group">
<label data-i18n="basic.height">é«˜ã•</label>
<input type="number" id="height" value="1024" min="512" step="8">
</div>
<div class="form-group">
<label data-i18n="basic.seed">ã‚·ãƒ¼ãƒ‰</label>
<div class="seed-group">
<input type="number" id="seed" value="-1">
<button class="seed-button" id="btnRandomSeed">ğŸ”„</button>
</div>
</div>
</div>
</div>
</div>
<div id="tabAdvancedContent" class="tab-content">
<div class="form-section">
<div class="form-section-title" data-i18n="advanced.connectionSettings">æ¥ç¶šè¨­å®š</div>
<div class="form-group">
<label data-i18n="advanced.comfyuiUrl">ComfyUI URL</label>
<div class="url-input-wrapper">
<input type="text" id="comfyUIPageUrl" value="http://localhost:8188" placeholder="http:// or https://">
<button type="button" id="showUrlHistory" class="url-history-btn" data-i18n="advanced.showHistory" data-i18n-attr="title">â˜°</button>
<button type="button" id="resetUrlDefault" class="url-reset-btn" data-i18n="advanced.resetToDefault" data-i18n-attr="title">â†º</button>
</div>
<div id="urlHistoryPopup" class="url-history-popup" style="display:none;">
<div class="url-history-popup-header" data-i18n="advanced.urlHistory">URLå±¥æ­´</div>
<div id="urlHistoryList" class="url-history-list"></div>
</div>
</div>
</div>
<div class="form-section">
<div class="form-section-title"><span data-i18n="advanced.metadataMarker">Metadata Marker</span><span style="font-size:12px;font-weight:normal;color:#888;margin-left:8px;" data-i18n="advanced.metadataDescription">ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç­‰ã‚’ç”»åƒã«è¿½è¨˜ãƒ»ã‚ªãƒªã‚¸ãƒŠãƒ«ç”»åƒã‚‚ä¿å­˜ï¼‰</span></div>
<div class="form-group">
<label class="checkbox-label"><input type="checkbox" id="metadataEnabled"> <span data-i18n="advanced.outputEnabled">Output Image Enabled</span></label>
</div>
<div class="form-group">
<label class="checkbox-label"><input type="checkbox" id="metadataFirstLineOnly"> <span data-i18n="advanced.firstLineOnly">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ1è¡Œç›®ã®ã¿è¨­å®š</span></label>
</div>
<div class="form-row">
<div class="form-group">
<label data-i18n="advanced.position">ä½ç½®</label>
<select id="metadataPosition">
<option value="overlay" data-i18n="advanced.posOverlay">Overlayï¼ˆä¸­å¤®ï¼‰</option>
<option value="top" selected data-i18n="advanced.posTop">Topï¼ˆä¸Šéƒ¨ï¼‰</option>
<option value="bottom" data-i18n="advanced.posBottom">Bottomï¼ˆä¸‹éƒ¨ï¼‰</option>
<option value="right" data-i18n="advanced.posRight">Rightï¼ˆå³ï¼‰</option>
<option value="left" data-i18n="advanced.posLeft">Leftï¼ˆå·¦ï¼‰</option>
</select>
</div>
<div class="form-group">
<label data-i18n="advanced.fontSize">Font Size</label>
<input type="number" id="metadataFontSize" value="14" min="8" max="72">
</div>
</div>
<div class="form-row">
<div class="form-group">
<label data-i18n="advanced.font">ãƒ•ã‚©ãƒ³ãƒˆ</label>
<select id="metadataFont">
<option value="Arial" style="font-family:Arial;">Arial</option>
<option value="Helvetica" style="font-family:Helvetica;">Helvetica</option>
<option value="Times New Roman" style="font-family:'Times New Roman';">Times New Roman</option>
<option value="Georgia" style="font-family:Georgia;">Georgia</option>
<option value="Verdana" style="font-family:Verdana;">Verdana</option>
<option value="Courier New" style="font-family:'Courier New';">Courier New</option>
<option value="Impact" style="font-family:Impact;">Impact</option>
<option value="Comic Sans MS" style="font-family:'Comic Sans MS';">Comic Sans MS</option>
</select>
</div>
<div class="form-group">
<label data-i18n="advanced.opacity">Opacity</label>
<div style="display:flex;align-items:center;gap:8px;">
<input type="range" id="metadataOpacity" min="0" max="100" value="80" style="flex:1;">
<span id="metadataOpacityValue" style="min-width:40px;text-align:right;">80%</span>
</div>
</div>
</div>
<div class="form-row">
<div class="form-group">
<label data-i18n="advanced.fontColor">ãƒ•ã‚©ãƒ³ãƒˆã‚«ãƒ©ãƒ¼</label>
<input type="color" id="metadataFontColor" value="#000000" style="width:100%;height:36px;padding:2px;">
</div>
<div class="form-group">
<label data-i18n="advanced.bgColor">èƒŒæ™¯è‰²</label>
<input type="color" id="metadataBgColor" value="#ffffff" style="width:100%;height:36px;padding:2px;">
</div>
</div>
<div class="form-group">
<label data-i18n="advanced.footerText">Footer Text</label>
<input type="text" id="metadataFooterText" data-i18n-placeholder="advanced.footerPlaceholder" placeholder="è¿½åŠ ãƒ†ã‚­ã‚¹ãƒˆï¼ˆä»»æ„ï¼‰">
</div>
</div>
</div>
<div id="tabWildcardContent" class="tab-content">
<div class="form-section">
<div class="form-section-title" data-i18n="wildcard.management">ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ç®¡ç†</div>
<div class="wildcard-search-box">
<input type="text" class="wildcard-search-input" id="wildcardSearchInput" data-i18n-placeholder="wildcard.search" placeholder="æ¤œç´¢..." oninput="wildcardFilterList()">
<button class="wildcard-btn wildcard-btn-primary" onclick="wildcardOpenEditor()" data-i18n="wildcard.new">+ æ–°è¦</button>
</div>
<div class="wildcard-list-container" id="wildcardListContainer"></div>
<div class="wildcard-actions">
<button class="wildcard-btn" onclick="wildcardImportData()" data-i18n="wildcard.import">ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
<button class="wildcard-btn" onclick="wildcardExportData()" data-i18n="wildcard.export">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
<button class="wildcard-btn wildcard-btn-danger" onclick="wildcardClearAll()" data-i18n="wildcard.deleteAll">å…¨å‰Šé™¤</button>
</div>
</div>
<div class="form-section">
<div class="form-section-title" data-i18n="wildcard.usage">ä½¿ã„æ–¹</div>
<div class="wildcard-usage-guide">
<div><code class="wildcard-code">__name__</code> <span data-i18n="wildcard.reference">ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰å‚ç…§</span></div>
<div><code class="wildcard-code">__path/name__</code> <span data-i18n="wildcard.hierarchy">éšå±¤æ§‹é€ </span></div>
<div><code class="wildcard-code">__name*__</code> <span data-i18n="wildcard.wildcardSearch">ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰æ¤œç´¢</span></div>
<div><code class="wildcard-code">{a|b|c}</code> <span data-i18n="wildcard.randomSelect">ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ</span></div>
</div>
</div>
</div>
<div id="tabDashboardContent" class="tab-content">
<div class="dashboard-container">
<div class="dashboard-header">
<h3 data-i18n="dashboard.title">Performance Dashboard</h3>
<button class="dashboard-clear-btn" id="dashboardClearStats" data-i18n="dashboard.clearAll">Clear All</button>
</div>
<div class="dashboard-summary">
<div class="summary-card"><div class="summary-value" id="dashboardTotalGenerations">0</div><div class="summary-label" data-i18n="dashboard.totalGenerations">Total</div></div>
<div class="summary-card"><div class="summary-value" id="dashboardGlobalAvg">-</div><div class="summary-label" data-i18n="dashboard.globalAvg">AVG</div></div>
<div class="summary-card"><div class="summary-value" id="dashboardGlobalMin">-</div><div class="summary-label" data-i18n="dashboard.globalMin">MIN</div></div>
<div class="summary-card"><div class="summary-value" id="dashboardGlobalMax">-</div><div class="summary-label" data-i18n="dashboard.globalMax">MAX</div></div>
<div class="summary-card"><div class="summary-value" id="dashboardUniqueTags">0</div><div class="summary-label" data-i18n="dashboard.uniqueTags">Tags</div></div>
<div class="summary-card"><div class="summary-value" id="dashboardLaunchCount">0</div><div class="summary-label" data-i18n="dashboard.launchCount">Launch</div></div>
<div class="summary-card"><div class="summary-value" id="dashboardFirstLaunch">-</div><div class="summary-label" data-i18n="dashboard.firstLaunch">Since</div></div>
</div>
<div class="dashboard-section">
<div class="section-header">
<h4 data-i18n="dashboard.modeStats">Mode Statistics</h4>
</div>
<div class="stats-table-container">
<table class="stats-table">
<thead>
<tr>
<th data-i18n="dashboard.mode">Mode</th>
<th data-i18n="dashboard.count">Count</th>
<th data-i18n="dashboard.avg">AVG (ms)</th>
<th data-i18n="dashboard.min">MIN (ms)</th>
<th data-i18n="dashboard.max">MAX (ms)</th>
</tr>
</thead>
<tbody id="dashboardStatsTable"></tbody>
</table>
</div>
</div>
<div class="dashboard-section">
<div class="section-header">
<h4 data-i18n="dashboard.timeGraph">Generation Time Graph</h4>
<select id="dashboardModeSelector" class="mode-selector">
<option value="T2I">T2I</option>
<option value="T2I_Loop">T2I Loop</option>
<option value="I2I">I2I</option>
<option value="I2I_Loop">I2I Loop</option>
<option value="I2I_Angle">I2I Angle</option>
<option value="Upscale">Upscale</option>
</select>
</div>
<div class="chart-container">
<canvas id="dashboardChart" width="600" height="200"></canvas>
</div>
</div>
<div class="dashboard-section">
<div class="section-header">
<h4 data-i18n="dashboard.hourlyHeatmap">Hourly Activity Heatmap</h4>
</div>
<div class="heatmap-container" id="dashboardHeatmap"></div>
</div>
<div class="dashboard-section">
<div class="section-header">
<h4 data-i18n="dashboard.trendGraph">Generation Trend</h4>
<select id="dashboardTrendSelector" class="mode-selector">
<option value="daily" data-i18n="dashboard.daily">Daily</option>
<option value="weekly" data-i18n="dashboard.weekly">Weekly</option>
<option value="monthly" data-i18n="dashboard.monthly">Monthly</option>
</select>
</div>
<div class="chart-container">
<canvas id="dashboardTrendChart" width="600" height="200"></canvas>
</div>
</div>
<div class="dashboard-section">
<div class="section-header">
<h4 data-i18n="dashboard.topTags">Most Used Tags</h4>
<button class="dashboard-clear-btn-small" id="dashboardClearTags" data-i18n="dashboard.clearTags">Clear Tags</button>
</div>
<div class="top-tags-container" id="dashboardTopTags">
<div class="no-tags" data-i18n="dashboard.noTags">No tags recorded</div>
</div>
</div>
<div class="dashboard-section">
<div class="section-header">
<h4 data-i18n="dashboard.wordcloud">Word Cloud</h4>
<button class="dashboard-download-btn" id="dashboardDownloadWordcloud" data-i18n="dashboard.download">Download</button>
</div>
<div class="wordcloud-container">
<canvas id="dashboardWordcloud" width="600" height="300"></canvas>
</div>
</div>
</div>
</div>
</div>
<div class="right-sidebar">
<div class="right-sidebar-title" data-i18n="sidebar.workflow">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</div>
<button class="workflow-button" id="btnOpenWorkflow" data-i18n="sidebar.comfyuiWorkflows">ComfyUI Workflows</button>
<div class="status-display">
<div class="status-item">
<span class="status-label" data-i18n="sidebar.connectionStatus">æ¥ç¶šçŠ¶æ…‹:</span>
<span class="status-value">
<span class="connection-indicator" id="connectionIndicator"></span>
<span id="connectionStatus" data-i18n="sidebar.offline">ã‚ªãƒ•ãƒ©ã‚¤ãƒ³</span>
</span>
</div>
<div class="status-item">
<span class="status-label" data-i18n="sidebar.currentWorkflow">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼:</span>
<span class="status-value" id="activeWorkflow" data-i18n="config.notSelected">æœªé¸æŠ</span>
</div>
<div class="status-item">
<span class="status-label" data-i18n="sidebar.generationStatus">ç”ŸæˆçŠ¶æ…‹:</span>
<span class="status-value" id="generationStatus" data-i18n="sidebar.ready">æº–å‚™å®Œäº†</span>
</div>
<div class="status-item">
<span class="status-label" data-i18n="sidebar.generationTime">ç”Ÿæˆæ™‚é–“:</span>
<span class="status-value" id="generationTimeStats">-</span>
</div>
</div>
<div class="generated-image-header">
<span data-i18n="sidebar.generatedImages">ç”Ÿæˆç”»åƒ</span>
<div style="display:flex;gap:4px;">
<button id="btnDownloadAll" class="clear-images-button" data-i18n="sidebar.downloadAll">ä¸€æ‹¬DL</button>
<button id="btnClearImages" class="clear-images-button" data-i18n="sidebar.clear">ã‚¯ãƒªã‚¢</button>
</div>
</div>
<div style="font-size:11px;color:#888;padding:4px 8px;margin-bottom:4px;" data-i18n="sidebar.generatedImagesDesc">â€»ComfyUIã®å‡ºåŠ›ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚‚ä¿å­˜ã•ã‚Œã¾ã™</div>
<div class="generated-image-container" id="generatedImageContainer">
<div id="noImagePlaceholder" class="no-image-placeholder">
<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
<circle cx="8.5" cy="8.5" r="1.5"></circle>
<polyline points="21 15 16 10 5 21"></polyline>
</svg>
<div data-i18n="sidebar.noImages">ç”Ÿæˆã•ã‚ŒãŸç”»åƒãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
</div>
</div>
</div>
</div>
<div id="imageModal" class="image-modal">
<span class="image-modal-close">&times;</span>
<div id="imageModalInner" class="image-modal-inner">
<img id="modalImage" src="" alt="æ‹¡å¤§ç”»åƒ">
</div>
</div>
<div id="wildcardEditorModal" class="wildcard-modal-overlay">
<div class="wildcard-modal">
<div class="wildcard-modal-header">
<span class="wildcard-modal-title" id="wildcardEditorTitle" data-i18n="wildcard.newWildcard">æ–°è¦ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰</span>
<button class="wildcard-modal-close" onclick="wildcardCloseEditor()">Ã—</button>
</div>
<div class="wildcard-modal-body">
<div class="wildcard-form-group">
<label class="wildcard-form-label" data-i18n="wildcard.name">åå‰</label>
<input type="text" class="wildcard-form-input" id="wildcardEditName" data-i18n-placeholder="wildcard.namePlaceholder" placeholder="ä¾‹: colors, artists/japanese">
</div>
<div class="wildcard-form-group">
<label class="wildcard-form-label" data-i18n="wildcard.values">å€¤ï¼ˆ1è¡Œã«1ã¤ï¼‰</label>
<textarea class="wildcard-form-input wildcard-form-textarea" id="wildcardEditValues" data-i18n-placeholder="wildcard.valuesPlaceholder" placeholder="red&#10;blue&#10;green"></textarea>
</div>
</div>
<div class="wildcard-modal-footer">
<button class="wildcard-btn wildcard-btn-danger" id="wildcardDeleteBtn" onclick="wildcardDelete()" style="margin-right:auto;display:none" data-i18n="wildcard.delete">å‰Šé™¤</button>
<button class="wildcard-btn" onclick="wildcardCloseEditor()" data-i18n="common.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
<button class="wildcard-btn wildcard-btn-primary" onclick="wildcardSave()" data-i18n="wildcard.save">ä¿å­˜</button>
</div>
</div>
</div>
<div id="wildcardImportModal" class="wildcard-modal-overlay">
<div class="wildcard-modal">
<div class="wildcard-modal-header">
<span class="wildcard-modal-title" data-i18n="wildcard.import">ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</span>
<button class="wildcard-modal-close" onclick="wildcardCloseImport()">Ã—</button>
</div>
<div class="wildcard-modal-body">
<textarea class="wildcard-import-textarea" id="wildcardImportData" placeholder='{"version":1,"wildcards":{"colors":["red","blue"]}}'></textarea>
</div>
<div class="wildcard-modal-footer">
<button class="wildcard-btn" onclick="wildcardCloseImport()" data-i18n="common.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
<button class="wildcard-btn wildcard-btn-primary" onclick="wildcardDoImport()" data-i18n="wildcard.import">ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
</div>
</div>
</div>
<div class="wildcard-toast" id="wildcardToast"></div>
<div id="sp-manga-toastContainer" style="position:fixed;bottom:20px;right:20px;z-index:9999;"></div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/core/logger.js"></script>
<script src="js/i18n/sui-i18n.js"></script>
<script src="js/ui/toast.js"></script>
<script src="js/ui/error-guide-dialog.js"></script>
<script src="js/ui/sidebar-toggle.js"></script>
<script src="https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
<script src="https://unpkg.com/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tagify/4.31.3/tagify.min.js"></script>
<script src="js/core/core.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui-workflow-builder.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui-util.js"></script>

<script src="js/settings/settings-storage.js"></script>
<script src="js/prompt/prompt-util.js"></script>
<script src="js/prompt/prompt-history.js"></script>
<script src="js/connection/connection.js"></script>
<script src="js/prompt/metadata-marker.js"></script>
<script src="js/image/image-display.js"></script>
<script src="js/generator/generator.js"></script>
<script src="js/ui/ui-controller.js"></script>

<script src="js/ai/ComfyUI/v2/comfyui-object-info-repository.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui-workflow-repository.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui-workflow-editor.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui-util-v2.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui-workflow-editor-tab.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui-workflow-interact.js"></script>

<script src="js/wildcard/wildcard-default.js"></script>
<script src="js/wildcard/wildcard-manager.js"></script>
<script src="js/image/camera-widget.js"></script>
<script src="js/dashboard/performance-storage.js"></script>
<script src="js/dashboard/prompt-frequency-storage.js"></script>
<script src="js/dashboard/dashboard-ui.js"></script>
<script src="js/ui/theme-manager.js"></script>

<!-- Settings Modal -->
<div class="settings-modal-overlay" id="settingsModalOverlay">
<div class="settings-modal">
<div class="settings-modal-header">
<h3 data-i18n="settings.title">è¨­å®š</h3>
<button class="settings-modal-close" id="btnCloseSettings">&times;</button>
</div>
<div class="settings-modal-body">
<div class="settings-group">
<label class="settings-label" data-i18n="settings.theme">ãƒ†ãƒ¼ãƒ</label>
<div class="settings-options">
<button class="theme-option" data-theme="beige" id="btnThemeBeige">
<span class="theme-icon">â—‡</span>
<span data-i18n="settings.beige">ãƒ™ãƒ¼ã‚¸ãƒ¥</span>
</button>
<button class="theme-option" data-theme="dark" id="btnThemeDark">
<span class="theme-icon">ğŸŒ™</span>
<span data-i18n="settings.dark">ãƒ€ãƒ¼ã‚¯</span>
</button>
<button class="theme-option" data-theme="light" id="btnThemeLight">
<span class="theme-icon">â˜€ï¸</span>
<span data-i18n="settings.light">ãƒ©ã‚¤ãƒˆ</span>
</button>
</div>
</div>
<div class="settings-group">
<label class="settings-label" data-i18n="settings.language">è¨€èª</label>
<div class="settings-options">
<button class="lang-option" data-lang="ja" id="btnLangJa">æ—¥æœ¬èª</button>
<button class="lang-option" data-lang="en" id="btnLangEn">English</button>
<button class="lang-option" data-lang="zh" id="btnLangZh">ä¸­æ–‡</button>
</div>
</div>
</div>
</div>
</div>

<script src="js/ai/ComfyUI/v2/comfyui_workflow/comfyui-t2i-default-workflows.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui_workflow/comfyui-rembg-default-workflows.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui_workflow/comfyui-upscale-default-workflows.js"></script>
<script src="js/ai/ComfyUI/v2/comfyui_workflow/comfyui-default-workflows.js"></script>
<script src="js/core/app-init.js"></script>
<script>
document.addEventListener('DOMContentLoaded',function(){
wildcardInit();
var tabWildcardBtn=$('btnTabWildcard');
if(tabWildcardBtn){
tabWildcardBtn.addEventListener('click',function(){
var tabs=document.querySelectorAll('.center-tab');
var contents=document.querySelectorAll('.tab-content');
tabs.forEach(function(t){t.classList.remove('active')});
contents.forEach(function(c){c.classList.remove('active')});
tabWildcardBtn.classList.add('active');
$('tabWildcardContent').classList.add('active');
});
}
var tabDashboardBtn=$('btnTabDashboard');
if(tabDashboardBtn){
tabDashboardBtn.addEventListener('click',function(){
var tabs=document.querySelectorAll('.center-tab');
var contents=document.querySelectorAll('.tab-content');
tabs.forEach(function(t){t.classList.remove('active')});
contents.forEach(function(c){c.classList.remove('active')});
tabDashboardBtn.classList.add('active');
$('tabDashboardContent').classList.add('active');
DashboardUI.init();
});
}
});
</script>
</body>
</html>
